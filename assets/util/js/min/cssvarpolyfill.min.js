var cssVarPoly={init:function(){window.CSS&&window.CSS.supports&&window.CSS.supports("(--foo: red)")||(document.querySelector("body").classList.add("cssvars-polyfilled"),cssVarPoly.ratifiedVars={},cssVarPoly.varsByBlock={},cssVarPoly.oldCSS={},cssVarPoly.findCSS(),cssVarPoly.updateCSS())},findCSS:function(){var e=document.querySelectorAll('style:not(.inserted),link[rel="stylesheet"],link[rel="import"]'),r=1;[].forEach.call(e,function(e){var s;"STYLE"===e.nodeName?(s=e.innerHTML,cssVarPoly.findSetters(s,r)):"LINK"===e.nodeName&&(cssVarPoly.getLink(e.getAttribute("href"),r,function(e,s){cssVarPoly.findSetters(s.responseText,e),cssVarPoly.oldCSS[e]=s.responseText,cssVarPoly.updateCSS()}),s=""),cssVarPoly.oldCSS[r]=s,r++})},findSetters:function(e,s){e=e.match(/:root\s*?\{(\s*?.*?\s*?)*\}/g)||[],cssVarPoly.varsByBlock[s]=e.join("").match(/(--.+:.+;)/g)||[]},updateCSS:function(){for(var e in cssVarPoly.ratifySetters(cssVarPoly.varsByBlock),cssVarPoly.oldCSS){var s=cssVarPoly.replaceGetters(cssVarPoly.oldCSS[e],cssVarPoly.ratifiedVars);if(document.querySelector("#inserted"+e))document.querySelector("#inserted"+e).innerHTML=s;else{var r=document.createElement("style");r.type="text/css",r.innerHTML=s,r.classList.add("inserted"),r.id="inserted"+e,document.getElementsByTagName("head")[0].appendChild(r)}}},replaceGetters:function(s,e){for(var r in e){var t=new RegExp("var\\(\\s*"+r+"\\s*\\)","g");n=s.match(t),s=s.replace(t,e[r]);var o=new RegExp("var\\(\\s*.+\\s*,\\s*(.+)\\)","g"),n=s.match(o);n&&n.forEach(function(e){s=s.replace(e,e.match(/var\(.+,\s*(.+)\)/)[1])})}return s},ratifySetters:function(e){for(var s in e){e[s].forEach(function(e){var s=e.split(/:\s*/);cssVarPoly.ratifiedVars[s[0]]=s[1].replace(/;/,"")})}},getLink:function(e,s,r){var t=new XMLHttpRequest;t.open("GET",e,!0),t.overrideMimeType("text/css;"),t.onload=function(){200<=t.status&&t.status<400&&"function"==typeof r&&r(s,t)},t.onerror=function(){},t.send()}};document.addEventListener("DOMContentLoaded",function(e){cssVarPoly.init()});