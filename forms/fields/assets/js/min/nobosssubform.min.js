var nobosssubform={CONSTRUCTOR:function(){jconfirm.defaults={draggable:!1,useBootstrap:!1,columnClass:"modal-confirm-resposive",animateFromElement:!1},nobosssubform.activateItemCollapse(),nobosssubform.activateCollapseButtons(),jQuery('[data-id="noboss-subform-reset"][data-multiple="true"][data-show="true"]').each(function(){nobosssubform.validateButtonDisplay(jQuery(this))}),jQuery('[data-id="noboss-subform-reset"][data-multiple="false"]').each(function(){nobosssubform.hideMultipleButtons(jQuery(this))}),jQuery("body").on("change",'[data-id="theme-modal-input"]',function(){jQuery('[data-id="noboss-subform-reset"][data-show="false"]').each(function(){jQuery(this).hide()}),nobosssubform.activateCollapseButtons(),nobosssubform.toggleCollapseAll("shrink")}),jQuery(document).on("subform-row-remove",function(e,o){var s=jQuery(o).parents(".row-fluid").siblings('[data-id="noboss-subform-reset"]');jQuery(o).remove(),!0===s.data("show")&&nobosssubform.validateButtonDisplay(s)}),jQuery(document).on("subform-row-add",function(e,o){var s=jQuery("section#content");util.fixScripts(s),util.activateYesno(s);var t=jQuery(o).parents(".row-fluid").first().find('[data-id="noboss-subform-reset"]').first();!0===t.data("show")&&t.show(),t.closest(".row-fluid").find('[data-id="noboss-collapse-button"]').show(),!1===t.data("multiple")&&nobosssubform.hideMultipleButtons(t),nobosssubform.activateItemCollapse(o)}),jQuery("section#content").on("click",'[data-id="noboss-subform-reset"]',nobosssubform.confirmModal),jQuery(window).on("change",function(){nobosssubform.changeSubformLabel()}),jQuery(window).load(function(){nobosssubform.changeSubformLabel(),nobosssubform.toggleCollapseAll("shrink")})},changeSubformLabel:function(){var e=jQuery("[data-subform-collapse-wrapper]").parent().prev(),o="";o=0!==jQuery(e).text().trim().length?"subform-label--visible":"subform-label--invisible",jQuery(e).addClass(o)},activateItemCollapse:function(e){1!=jQuery(e).data("activated")&&(void 0===e?jQuery("[data-noboss-collapse]").off("click").on("click",nobosssubform.toggletCollapse):(jQuery(e).find("[data-noboss-collapse]").off("click").on("click",nobosssubform.toggletCollapse),jQuery(e).data("activated",!0)))},toggletCollapse:function(){var e=jQuery(this).parent();"grow"===jQuery(e).data("collapse")?nobosssubform.collapseItems(e):nobosssubform.expandItems(e)},activateCollapseButtons:function(){var e=jQuery("[data-id=noboss-collapse-button]");jQuery(e).each(function(){jQuery(this).on("click",function(){var e=jQuery(this).data("toggle"),o=jQuery(this).closest("[data-subform-collapse-wrapper]");nobosssubform.toggleCollapseAll(e,o)})})},toggleCollapseAll:function(e,o){var s=o;void 0===o&&(s=jQuery("[data-subform-collapse-wrapper]")),jQuery(s).find(".subform-repeatable-group").each(function(){"grow"==e?"shrink"===jQuery(this).data("collapse")&&nobosssubform.expandItems(jQuery(this)):"shrink"==e&&"grow"===jQuery(this).data("collapse")&&nobosssubform.collapseItems(jQuery(this))})},expandItems:function(e){jQuery(e).children(".hidden").removeClass("hidden").clearQueue().slideDown(),jQuery(e).find(".noboss-collapse__title").text(""),jQuery(e).find(".noboss-collapse__icon").removeClass("rotate-icon"),jQuery(e).data("collapse","grow"),jQuery(e).toggleClass("shrink grow")},collapseItems:function(e){jQuery(e).children().not('[style*="display: none"], .noboss-collapse, .btn-toolbar').clearQueue().slideUp("fast",function(){jQuery(this).addClass("hidden")}),nobosssubform.updateCollapseTitle(e),jQuery(e).find(".noboss-collapse__icon").addClass("rotate-icon"),jQuery(e).data("collapse","shrink"),jQuery(e).toggleClass("shrink grow")},updateCollapseTitle:function(e){var o=jQuery(e).closest("[data-subform-collapse-wrapper]").find("[data-collapse-label]").data("collapse-label");if(o){var s=jQuery(e).data("group"),t=jQuery(e).find("[for$="+s+"__"+o+"]").text();t=t.replace("*","");var a=jQuery(e).find("[id$="+s+"__"+o+"]"),n=jQuery(a).val();jQuery(e).closest("[data-subform-collapse-wrapper]").find("[data-is-editor]").data("is-editor")&&(n=jQuery(a).parent().find("iframe").contents().find("body").text()),void 0!==n&&(0===n.trim().length&&(n=jQuery("[data-collapse-default-value]").data("collapse-default-value")),jQuery(e).find(".noboss-collapse__title").text(t+": "+n))}},confirmModal:function(e){e.preventDefault();var o=jQuery(this),s=o.data("min"),t=o.data("multiple"),a=o.closest(".row-fluid"),n=a.find("a.group-add.button:first"),l=a.find('[data-group^="'+o.data("name")+'"]');jQuery.confirm({title:Joomla.JText._("LIB_NOBOSS_FIELD_NOBOSSSUBFORM_ALERT_MESSAGE_TITLE"),content:Joomla.JText._("LIB_NOBOSS_FIELD_NOBOSSSUBFORM_ALERT_MESSAGE_CONTENT"),type:"blue",closeIcon:"cancel",escapeKey:"cancel",buttons:{cancel:{keys:["esc"],text:Joomla.JText._("LIB_NOBOSS_FIELD_NOBOSSMODAL_MODAL_CONFIRM_CANCEL_BUTTON")},confirm:{text:Joomla.JText._("LIB_NOBOSS_FIELD_NOBOSSMODAL_MODAL_CONFIRM_CONFIRM_BUTTON"),btnClass:"btn-blue",keys:["enter"],action:function(){if(t){if(jQuery(l).each(function(e,o){jQuery(o).find(".btn-group").find(".btn-danger").first().click()}),s)for(var e=0;e<s;e++)n.click();nobosssubform.validateButtonDisplay(o)}else n.click(),l=a.find('[data-group^="'+o.data("name")+'"]'),jQuery(l[0]).remove(),nobosssubform.hideMultipleButtons(o)}}}})},validateButtonDisplay:function(e){var o=e,s=o.closest(".row-fluid").find('[data-id="noboss-collapse-button"]');0!=o.closest(".row-fluid").find('[data-group^="'+o.data("name")+'"]').length?(o.show(),s.show()):(o.hide(),s.hide())},hideMultipleButtons:function(e){var o=e;o.siblings(".row-fluid").find("div.btn-toolbar").hide(),o.siblings(".row-fluid").addClass("clear-fix")}};jQuery(document).ready(function(o){$=o;var e=["../libraries/noboss/assets/plugins/js/min/jquery-confirm.min.js","../libraries/noboss/assets/plugins/stylesheets/css/jquery-confirm.min.css","../libraries/noboss/assets/util/js/min/reactivatesubformfields.min.js"].map(function(e){return"js"===e.slice(-2)&&0===o("script[src*='"+e.slice(-30)+"']").length?o("head").append('<script type="text/javascript" src="'+e+'"><\/script>'):"css"===e.slice(-3)&&0===o("link[href*='"+e.slice(-30)+"']").length?o("head").append('<link rel="stylesheet" href="'+e+'"/>'):void 0});o.when.apply(null,e).done(function(){nobosssubform.CONSTRUCTOR()})});