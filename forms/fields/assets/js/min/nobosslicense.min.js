jQuery(document).ready(function(n){$=n;var e=["../libraries/noboss/assets/util/js/min/cookies.min.js","../libraries/noboss/assets/util/js/min/loaders.min.js","../libraries/noboss/assets/plugins/js/min/jquery-confirm.min.js","../libraries/noboss/assets/plugins/stylesheets/css/jquery-confirm.min.css"].map(function(e){return"js"===e.slice(-2)&&0===n("script[src*='"+e.slice(-30)+"']").length?n("head").append('<script type="text/javascript" src="'+e+'"><\/script>'):"css"===e.slice(-3)&&0===n("link[href*='"+e.slice(-30)+"']").length?n("head").append('<link rel="stylesheet" href="'+e+'"/>'):void 0});n.when.apply(null,e).done(function(){n.urlParam=function(e){return new RegExp("[?&]"+e+"=([^&#]*)").exec(window.location.href)[1]||0},nobosslicense.CONSTRUCTOR()})});var nobosslicense={CONSTRUCTOR:function(){if(nobosslicense.licenseInfo=Joomla.getOptions("nobosslicense"),jconfirm.defaults={draggable:!1,useBootstrap:!0,animateFromElement:!1,columnClass:"modal-confirm-responsive"},void 0!==nobosslicense.licenseInfo&&"TOKEN_OR_PLAN_NOT_FOUND"===nobosslicense.licenseInfo.data)nobosslicense.alertErrorModal(Joomla.JText._("LIB_NOBOSS_FIELD_NOBOSSLICENSE_MODAL_INVALID_TOKEN_TITLE"),Joomla.JText._("LIB_NOBOSS_FIELD_NOBOSSLICENSE_MODAL_INVALID_TOKEN_DESC"));else if(void 0===nobosslicense.licenseInfo||"CONNECTION_ERROR"===nobosslicense.licenseInfo.data)nobosslicense.alertErrorModal(Joomla.JText._("LIB_NOBOSS_FIELD_NOBOSSLICENSE_MODAL_INITIAL_CONNECTION_ERROR_TITLE"),Joomla.JText._("LIB_NOBOSS_FIELD_NOBOSSLICENSE_MODAL_INITIAL_CONNECTION_ERROR_DESC"));else if(void 0!==nobosslicense.licenseInfo&&"INVALID_TOKEN"===nobosslicense.licenseInfo.data)nobosslicense.alertErrorModal(Joomla.JText._("LIB_NOBOSS_FIELD_NOBOSSLICENSE_MODAL_INVALID_TOKEN_TITLE"),Joomla.JText._("LIB_NOBOSS_FIELD_NOBOSSLICENSE_MODAL_INVALID_TOKEN_DESC"));else if("0"==jQuery("#license_state").val())nobosslicense.alertErrorModal(Joomla.JText._("LIB_NOBOSS_FIELD_NOBOSSLICENSE_MODAL_UNPUBLISHED_LICENSE_TITLE"),Joomla.JText._("LIB_NOBOSS_FIELD_NOBOSSLICENSE_MODAL_UNPUBLISHED_LICENSE_DESC"),!1);else{if(nobosslicense.licenseInfo.flags.license_has_errors&&!nobosslicense.licenseInfo.flags.has_parent_license){var e=jQuery.urlParam("option"),n="",o="",t="#";"com_modules"===e?(n=Joomla.JText._("LIB_NOBOSS_FIELD_NOBOSSLICENSE_ALERT_HAS_ERRORS_MODULE"),o=Joomla.JText._("LIB_NOBOSS_FIELD_NOBOSSLICENSE_ALERT_HAS_ERRORS_MODULE_LINK"),jQuery("body").on("click",'[data-id="open-license-tab"]',function(e){e.preventDefault(),jQuery('[href="#attrib-license"]').trigger("click")})):/^com_noboss/.test(e)?(n=Joomla.JText._("LIB_NOBOSS_FIELD_NOBOSSLICENSE_ALERT_HAS_ERRORS_COMPONENT"),o=Joomla.JText._("LIB_NOBOSS_FIELD_NOBOSSLICENSE_ALERT_HAS_ERRORS_COMPONENT_LINK"),t=window.location.origin+window.location.pathname+"?option=com_config&view=component&component="+e):"com_config"===e&&(n=Joomla.JText._("LIB_NOBOSS_FIELD_NOBOSSLICENSE_ALERT_HAS_ERRORS_GLOBAL_COMPONENT"),o=Joomla.JText._("LIB_NOBOSS_FIELD_NOBOSSLICENSE_ALERT_HAS_ERRORS_GLOBAL_COMPONENT_LINK"),jQuery("body").on("click",'[data-id="open-license-tab"]',function(e){e.preventDefault(),jQuery('[href="#license"]').trigger("click")})),jQuery("#system-message-container").before('<div data-id="license-alert-message" class="feedback-notice feedback-notice--error" data-has-error style="margin-top:-5px;"><span class="feedback-notice__icon fa fa-ban"></span><div class="feedback-notice__content"><p class="feedback-notice__message" data-id="license-alert-message-text"> '+n+' <a href="'+t+'" target="_blank" data-id="open-license-tab"> '+o+"</a></p></div></div>")}jQuery("[data-id=license-alert-message]").on("click",'[data-id="btn-change-url"]',nobosslicense.changeAuthorizedUrl),jQuery('[data-id="plan-upgrade"]').on("click",'[data-id="btn-plan-upgrade"]',nobosslicense.upgradeLicensePlan),jQuery(document).on("click",'[data-id="btn-plan-upgrade-buy"]',nobosslicense.openPlanstableModal),jQuery("[data-id=license-alert-message]").on("click",'[data-id="btn-renew-license"]',nobosslicense.openPlanstableModal),window.addEventListener("message",nobosslicense.filterIframeMessage,!1),nobosslicense.licenseInfo.flags.modal_display_notice_license&&nobosslicense.displayModalNoticeLicense(),null!=nobosslicense.licenseInfo.data.is_free&&1==nobosslicense.licenseInfo.data.is_free&&jQuery("#system-message-container").before('<div data-id="license-alert-message" class="feedback-notice style="margin-top:-5px;"><span class="feedback-notice__icon fa fa-money"></span><div class="feedback-notice__content"><p class="feedback-notice__message" data-id="license-alert-message-text">'+Joomla.JText._("LIB_NOBOSS_FIELD_NOBOSSLICENSE_NOTICE_GET_PAID_VERSION")+"</p></div></div>"),nobosslicense.licenseInfo.flags.modal_display_messages&&!1!==nobosslicense.licenseInfo.data.messages&&jQuery.each(nobosslicense.licenseInfo.data.messages,function(e,n){jQuery.alert({title:n.title,content:n.message})})}},alertErrorModal:function(e,n,o){null!=o&&!o||jQuery(document).ready(function(){var e=jQuery(".nav.nav-tabs").find('[href="#attrib-license"]');0!=e.length&&e.parent().addClass("hidden")}),jQuery.alert({title:e,content:n,type:"red",buttons:{ok:{keys:["enter"]}}})},displayModalNoticeLicense:function(){var e={},n={};0!=nobosslicense.licenseInfo.data.inside_support_updates_expiration||util.getCookie("expired_license_modal")||nobosslicense.licenseInfo.flags.has_parent_license?!nobosslicense.licenseInfo.data.updates_near_to_expire||util.getCookie("expiring_license_modal")||nobosslicense.licenseInfo.flags.has_parent_license||(e={title:Joomla.JText._("LIB_NOBOSS_FIELD_NOBOSSLICENSE_MODAL_EXPIRING_LICENSE_TITLE"),content:Joomla.JText._("LIB_NOBOSS_FIELD_NOBOSSLICENSE_MODAL_EXPIRING_LICENSE_DESC"),type:"blue",closeIcon:"close",buttons:{close:{keys:["esc"],text:Joomla.JText._("LIB_NOBOSS_FIELD_NOBOSSLICENSE_MODAL_EXPIRING_LICENSE_CLOSE")},renew:{text:Joomla.JText._("LIB_NOBOSS_FIELD_NOBOSSLICENSE_MODAL_EXPIRING_LICENSE_RENEW"),keys:["enter"],btnClass:"btn-blue",action:function(){nobosslicense.openPlanstableModal()}}}},util.setCookie("expiring_license_modal",!0,parseInt(nobosslicense.licenseInfo.data.days_to_expire_support_updates)-1)):(e={title:Joomla.JText._("LIB_NOBOSS_FIELD_NOBOSSLICENSE_MODAL_EXPIRED_LICENSE_TITLE"),content:Joomla.JText._("LIB_NOBOSS_FIELD_NOBOSSLICENSE_MODAL_EXPIRED_LICENSE_DESC"),type:"red",closeIcon:"close",buttons:{close:{keys:["esc"],text:Joomla.JText._("LIB_NOBOSS_FIELD_NOBOSSLICENSE_MODAL_EXPIRED_LICENSE_CLOSE")},renew:{text:Joomla.JText._("LIB_NOBOSS_FIELD_NOBOSSLICENSE_MODAL_EXPIRED_LICENSE_RENEW"),keys:["enter"],btnClass:"btn-blue",action:function(){nobosslicense.openPlanstableModal()}}}},util.setCookie("expired_license_modal",!0,1)),nobosslicense.licenseInfo.data.isAuthorizedUrl||util.getCookie("unauthorized_url")?1==nobosslicense.licenseInfo.data.has_upgrade&&(n={title:Joomla.JText._("LIB_NOBOSS_FIELD_NOBOSSLICENSE_MODAL_UPGRADE_AVAILABLE_DOWNLOAD_TITLE"),content:Joomla.JText._("LIB_NOBOSS_FIELD_NOBOSSLICENSE_MODAL_UPGRADE_AVAILABLE_DOWNLOAD_DESC"),type:"blue",closeIcon:"upgradeLater",buttons:{upgradeLater:{keys:["esc"],text:Joomla.JText._("LIB_NOBOSS_FIELD_NOBOSSLICENSE_MODAL_UPGRADE_AVAILABLE_DOWNLOAD_LATER_BUTTON")},upgradeNow:{text:Joomla.JText._("LIB_NOBOSS_FIELD_NOBOSSLICENSE_MODAL_UPGRADE_AVAILABLE_DOWNLOAD_NOW_BUTTON"),btnClass:"btn-blue",action:function(){nobosslicense.upgradeLicensePlanAction()}}}}):(n={title:Joomla.JText._("LIB_NOBOSS_FIELD_NOBOSSLICENSE_MODAL_UNAUTHORIZED_URL_TITLE"),content:Joomla.JText._("LIB_NOBOSS_FIELD_NOBOSSLICENSE_MODAL_UNAUTHORIZED_URL_DESC"),type:"red",closeIcon:"keepLicenseUrl",buttons:{keepLicenseUrl:{keys:["esc"],text:Joomla.JText._("LIB_NOBOSS_FIELD_NOBOSSLICENSE_MODAL_UNAUTHORIZED_URL_BUTTON_KEEP_URL")},updateLicenseUrl:{text:Joomla.JText._("LIB_NOBOSS_FIELD_NOBOSSLICENSE_MODAL_UNAUTHORIZED_URL_BUTTON_UPDATE_URL"),keys:["enter"],btnClass:"btn-blue",action:function(){nobosslicense.changeAuthorizedUrlAction()}}}},util.setCookie("unauthorized_url",!0,1));var o={title:"Error",type:"blue"};jQuery.isEmptyObject(e)||jQuery.confirm(jQuery.extend(o,e)),jQuery.isEmptyObject(n)||jQuery.confirm(jQuery.extend(o,n))},changeAuthorizedUrl:function(e){e.preventDefault(),nobosslicense.changeAuthorizedUrlAction()},changeAuthorizedUrlAction:function(){jQuery.confirm({title:Joomla.JText._("LIB_NOBOSS_FIELD_NOBOSSLICENSE_MODAL_CHANGE_LICENSE_URL_TITLE"),content:Joomla.JText._("LIB_NOBOSS_FIELD_NOBOSSLICENSE_MODAL_CHANGE_LICENSE_URL_DESC"),type:"blue",closeIcon:"cancel",escapeKey:"cancel",buttons:{cancel:{keys:["esc"],text:Joomla.JText._("LIB_NOBOSS_FIELD_NOBOSSLICENSE_MODAL_CHANGE_LICENSE_URL_BUTTON_CANCEL")},confirm:{text:Joomla.JText._("LIB_NOBOSS_FIELD_NOBOSSLICENSE_MODAL_CHANGE_LICENSE_URL_BUTTON_CONFIRM"),btnClass:"btn-blue",keys:["enter"],action:function(){jQuery.ajax({url:Joomla.JText._("NOBOSS_EXTENSIONS_URL_SITE")+"/index.php?option=com_nbextensoes&task=externallicenses.changeAuthorizedUrl&format=raw",type:"POST",timeout:3e4,data:{token:nobosslicense.licenseInfo.data.token,newUrl:nobosslicense.licenseInfo.data.siteUrl},beforeSend:function(){util.addLoader()}}).done(function(e){if("true"==e){jQuery('[data-id="license-alert-message"]').remove();jQuery.alert({title:Joomla.JText._("LIB_NOBOSS_FIELD_NOBOSSLICENSE_MODAL_CHANGE_LICENSE_URL_UPDATE_SUCESS_TITLE"),content:Joomla.JText._("LIB_NOBOSS_FIELD_NOBOSSLICENSE_MODAL_CHANGE_LICENSE_URL_UPDATE_SUCESS_DESC"),type:"blue"})}else jQuery.alert({title:Joomla.JText._("LIB_NOBOSS_FIELD_NOBOSSLICENSE_MODAL_CHANGE_LICENSE_URL_UPDATE_ERROR_TITLE"),content:Joomla.JText._("LIB_NOBOSS_FIELD_NOBOSSLICENSE_MODAL_CHANGE_LICENSE_URL_UPDATE_ERROR_DESC"),type:"red"});setTimeout(function(){util.removeLoader()},400)})}}}})},upgradeLicensePlan:function(e){1==nobosslicense.licenseInfo.data.has_upgrade&&(e.preventDefault(),nobosslicense.upgradeLicensePlanAction())},openPlanstableModal:function(e){var n="renew";null!=e&&(e.preventDefault(),"btn-plan-upgrade-buy"===jQuery(this).data("id")&&(n="upgrade"));var o=nobosslicense.licenseInfo.data.token,t=(nobosslicense.licenseInfo.data.id_local_plan,Joomla.JText._("NOBOSS_EXTENSIONS_URL_SITE")+"/buy-process/planstable?token="+o+"&processtype="+n);$currentScrollPos=jQuery(window).scrollTop(),jQuery("body").css("top",-$currentScrollPos);var s=jQuery("<div>").addClass("buy-process-modal").hide().fadeIn("normal"),_=jQuery("<div>").addClass("modal-shadow").hide().fadeIn("normal"),a=jQuery("<span>").addClass("btn-close fa fa-times"),l=jQuery("<iframe>").attr("src",t).attr("scrolling","yes").addClass("buy-process-iframe");_.appendTo("body"),a.appendTo(s),l.appendTo(s),s.appendTo("body"),jQuery("body").toggleClass("inactive"),nobosslicense.addCloseListener()},closePlanstableModal:function(){var e=jQuery(".buy-process-modal");jQuery(".modal-shadow").fadeOut(300,function(){jQuery(this).remove()}),e.fadeOut(250,function(){jQuery(this).remove()}),document.cookie="modalPlanId=; expires="+new Date+"; path= /",jQuery("body").toggleClass("inactive"),jQuery("body").css("top","")},addCloseListener:function(){jQuery(".btn-close").on("click",function(e){nobosslicense.closePlanstableModal()})},upgradeLicensePlanAction:function(){jQuery.confirm({title:Joomla.JText._("LIB_NOBOSS_FIELD_NOBOSSLICENSE_MODAL_UPGRADE_CONFIRM_ACTION_TITLE"),content:Joomla.JText._("LIB_NOBOSS_FIELD_NOBOSSLICENSE_MODAL_UPGRADE_CONFIRM_ACTION_DESC"),type:"blue",closeIcon:"cancel",escapeKey:"cancel",buttons:{cancel:{keys:["esc"],text:Joomla.JText._("LIB_NOBOSS_FIELD_NOBOSSLICENSE_MODAL_UPGRADE_CONFIRM_ACTION_BUTTON_CANCEL")},confirm:{text:Joomla.JText._("LIB_NOBOSS_FIELD_NOBOSSLICENSE_MODAL_UPGRADE_CONFIRM_ACTION_BUTTON_CONFIRM"),btnClass:"btn-blue",keys:["enter"],action:function(){jQuery.ajax({url:"../index.php?option=com_nobossajax&library=noboss.forms.fields.nobosslicense.nobosslicense&method=upgradeLicensePlan&format=raw",type:"POST",timeout:3e4,data:{token:nobosslicense.licenseInfo.data.token,plan:nobosslicense.licenseInfo.data.id_local_plan},beforeSend:function(){util.addLoader()}}).done(function(e){e=JSON.parse(e),jQuery.alert({title:Joomla.JText._("LIB_NOBOSS_FIELD_NOBOSSLICENSE_UPGRADE_PLAN_TITLE"),content:e.message,type:1==e.success?"blue":"red",buttons:{ok:{keys:["enter"],action:function(){setTimeout(function(){location.reload()},500)}}}})}).fail(function(){jQuery.alert({title:Joomla.JText._("LIB_NOBOSS_FIELD_NOBOSSLICENSE_MODAL_INITIAL_CONNECTION_ERROR_TITLE"),content:Joomla.JText._("LIB_NOBOSS_FIELD_NOBOSSLICENSE_MODAL_INITIAL_CONNECTION_ERROR_DESC"),type:"red",buttons:{ok:{keys:["enter"]}}})}).always(function(){setTimeout(function(){util.removeLoader()},400)})}}}})},filterIframeMessage:function(e){var n=e.data;void 0!==e.data&&("refresh"==e.data.msgType?nobosslicense.warnAndRefreshPage(n):"installNewExtensions"==e.data.msgType&&nobosslicense.installNewExtensions(n))},warnAndRefreshPage:function(e){jQuery.alert({title:Joomla.JText._("LIB_NOBOSS_FIELD_NOBOSSLICENSE_MODAL_PAGE_REFRESH_ALERT_TITLE"),content:Joomla.JText._("LIB_NOBOSS_FIELD_NOBOSSLICENSE_MODAL_PAGE_REFRESH_ALERT_DESC"),buttons:{ok:{keys:["enter"],action:function(){setTimeout(function(){location.reload()},500)}}}})},installNewExtensions:function(e){"string"!=typeof e&&null!=e.new_extensions&&0!=e.new_extensions.length&&jQuery.confirm({title:Joomla.JText._("LIB_NOBOSS_FIELD_NOBOSSLICENSE_MODAL_INSTALL_NEW_CONFIRM_ACTION_TITLE"),content:Joomla.JText._("LIB_NOBOSS_FIELD_NOBOSSLICENSE_MODAL_INSTALL_NEW_CONFIRM_ACTION_DESC"),type:"blue",buttons:{confirm:{text:Joomla.JText._("LIB_NOBOSS_FIELD_NOBOSSLICENSE_MODAL_INSTALL_NEW_CONFIRM_ACTION_BUTTON_CONFIRM"),btnClass:"btn-blue",keys:["enter"],action:function(){jQuery(".btn-close").trigger("click"),jQuery.ajax({url:"../index.php?option=com_nobossajax&library=noboss.forms.fields.nobosslicense.nobosslicense&method=installNewExtension&format=raw",type:"POST",timeout:3e4,data:{newExtUrl:e.new_extensions},beforeSend:function(){util.addLoader()}}).done(function(e){e=JSON.parse(e),jQuery.alert({title:Joomla.JText._("LIB_NOBOSS_FIELD_NOBOSSLICENSE_MODAL_INSTALL_NEW_CONFIRM_ACTION_TITLE"),content:e.message,type:1==e.success?"blue":"red",buttons:{ok:{keys:["enter"],action:function(){setTimeout(function(){location.reload()},500)}}}})}).fail(function(){jQuery.alert({title:Joomla.JText._("LIB_NOBOSS_FIELD_NOBOSSLICENSE_MODAL_INITIAL_CONNECTION_ERROR_TITLE"),content:Joomla.JText._("LIB_NOBOSS_FIELD_NOBOSSLICENSE_MODAL_INITIAL_CONNECTION_ERROR_DESC"),type:"red",buttons:{ok:{keys:["enter"]}}})}).always(function(){setTimeout(function(){util.removeLoader()},400)})}}}})}};