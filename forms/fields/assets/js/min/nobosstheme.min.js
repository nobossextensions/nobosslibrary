jQuery(document).ready(function(t){$=t;var e=["../libraries/noboss/assets/util/js/min/reactivatesubformfields.min.js","../libraries/noboss/assets/plugins/js/min/jquery-confirm.min.js","../libraries/noboss/assets/plugins/stylesheets/css/jquery-confirm.min.css"].map(function(e){return"js"===e.slice(-2)&&0===t("script[src*='"+e.slice(-30)+"']").length?t("head").append('<script type="text/javascript" src="'+e+'"><\/script>'):"css"===e.slice(-3)&&0===t("link[href*='"+e.slice(-30)+"']").length?t("head").append('<link rel="stylesheet" href="'+e+'"/>'):void 0});t.when.apply(null,e).done(function(){nobosstheme.CONSTRUCTOR()})});var nobosstheme={CONSTRUCTOR:function(){nobosstheme.themeInfos=Joomla.getOptions("nobosstheme"),nobosstheme.token=jQuery("#license_token").val(),jQuery("body").on("click",'[data-id="noboss-theme-button"]',nobosstheme.loadThemeModal),jQuery("body").on("click",'[data-id="theme-modal"] [data-id="theme-modal-button-cancel"]',nobosstheme.cancelThemeModal),jQuery("body").on("click",'[data-id="theme-modal"] [data-id="theme-modal-button-confirm"]',nobosstheme.confirmThemeModal),jQuery("body").on("click",'[data-id="theme-modal"] [data-id="sample-option"]',nobosstheme.selectSample),jQuery('[data-id="noboss-theme-selected"]').val()&&(theme=jQuery('[data-id="selected-theme"]').find('[data-id="selected-theme-img"]').data("theme"),jQuery('[data-id="noboss-theme-selected"]').val(jQuery("[data-id=theme-option][data-value="+theme+"]").find("p").html())),void 0===jQuery("#jform_module").val()?(nobosstheme.extensionName=nobosstheme.themeInfos.extName,nobosstheme.isComponent=!0):(nobosstheme.extensionName=jQuery("#jform_module").val().replace("mod_noboss",""),nobosstheme.isComponent=!1),jconfirm.defaults={draggable:!1,useBootstrap:!1,columnClass:"modal-confirm-resposive",animateFromElement:!1};var e=jQuery("body").find("form")[0];jQuery(e).on("submit",function(e){var t=jQuery('[data-id="theme-modal-input"]');t.val(JSON.stringify(t.data("value")))}),jQuery("body").find('[data-id="theme-modal"] [data-target]').on("click",function(){jQuery(this).toggleClass("grow");var e=jQuery(this).data("target");jQuery(this).parent().find(e).slideToggle()}),jQuery(window).resize(function(){jQuery(window).width()<660&&jQuery('[data-id="theme-modal"]').find('[data-id="theme-option"]').children(".theme-name").each(function(){jQuery(this).hasClass("grow")||jQuery(this).trigger("click")})})},loadThemeModal:function(e){e.preventDefault();var t=jQuery(this),o=jQuery(this).closest(".controls").find('[data-id="theme-modal"]'),a=jQuery(o).parent().find('[data-id="theme-modal-input"]').attr("data-load-sample-data");!0!==jQuery(o).data("loaded")&&1==a?jQuery.ajax({url:Joomla.JText._("NOBOSS_EXTENSIONS_URL_SITE")+"/index.php?option=com_nbextensoes&task=externalthemes.getThemesSamples&format=raw",method:"POST",timeout:8e3,data:{token:nobosstheme.token,extension:nobosstheme.extensionName,language:jQuery(t).closest(".controls").find('[data-id="theme-modal-input"]').data("language")}}).done(function(e){var t;try{t=JSON.parse(e)}catch(e){jQuery(o).find('[data-id="notification"]').removeClass("hidden").removeClass("alert-info").addClass("alert-warning").html(Joomla.JText._("LIB_NOBOSS_FIELD_NOBOSSTHEME_MODAL_NBSERVER_CONNECTION_ERROR"))}if(void 0!==t){var a=jQuery(o).find('[data-id="theme-list"]');jQuery.each(t,function(e,t){var i=jQuery(a).find('[data-id="theme-option"][data-value="'+e+'"]');jQuery.each(t,function(e,t){var a=jQuery(i).find('[data-id="sample-list"]').find('[data-id="sample-option"]'),o=jQuery(i).find('[data-id="sample-list"]').find('[data-id="sample-option"][data-value="'+e+'"]');if(0!==o.length)0!==t.length&&o.find("img").attr("src",t);else{var n=jQuery(i).find('[data-id="sample-list"]').find('[data-id="sample-option"]').first().clone();n.attr("data-value",e),n.removeClass("selected"),0!==t.length&&n.find("img").attr("src",t),jQuery(a).last().after(n)}})})}}).fail(function(e){jQuery(o).find('[data-id="notification"]').removeClass("hidden").removeClass("alert-info").addClass("alert-warning").html(Joomla.JText._("LIB_NOBOSS_FIELD_NOBOSSTHEME_MODAL_NBSERVER_CONNECTION_ERROR"))}).always(function(){nobosstheme.classifyPlansAndSupport(o),nobosstheme.freezeListGif(o),nobosstheme.openThememodal(o),o.data("loaded",!0)}):(nobosstheme.classifyPlansAndSupport(o),nobosstheme.freezeListGif(o),nobosstheme.openThememodal(o))},openThememodal:function(e){e.removeClass("hidden"),jQuery("body").addClass("modal--is-open")},closeThemeModal:function(e){e.addClass("hidden"),jQuery("body").removeClass("modal--is-open")},selectSample:function(e){var t=jQuery(this),a=jQuery(t).closest('[data-id="theme-modal"]');jQuery(t).closest('[data-id="theme-list"]').find('[data-id="sample-option"]').removeClass("selected"),jQuery(t).addClass("selected");var o=jQuery(t).closest(".nb-modal-body").find('[data-id="selected-theme"]').find('[data-id="selected-theme-img"]');o.data("theme",t.closest('[data-id="theme-option"]').data("value")),o.data("sample",t.data("value")),o.attr("src",t.find("img").attr("src")),!0===jQuery(t).data("blocked")?(jQuery(a).find(".nb-modal-footer").find('[data-id="theme-modal-button-confirm"]').css("pointer-events","none").attr("disabled",!0),jQuery(a).find('[data-id="notification"]').html(Joomla.JText._("LIB_NOBOSS_FIELD_NOBOSSTHEME_MODAL_UNAVAILABLE_SAMPLE")).removeClass("hidden").removeClass("alert-warning").addClass("alert-info")):(jQuery(a).find('[data-id="notification"]').addClass("hidden"),jQuery(a).find(".nb-modal-footer").find('[data-id="theme-modal-button-confirm"]').css("pointer-events","auto").attr("disabled",!1),jQuery(window).width()<660&&jQuery(a).find('[data-id="theme-modal-button-confirm"]').trigger("click"))},freezeListGif:function(e){!0!==e.data("loaded")&&jQuery(e).find('[data-id="theme-list"]').find('[data-id="sample-option"] .sample-img').each(function(){if(/^(?!data:).*\.gif/i.test(jQuery(this).attr("src"))){function e(){var e=document.createElement("canvas"),t=e.height=o.height,a=e.width=o.width;for(e.getContext("2d").drawImage(o,0,0,a,t),i=0;i<o.attributes.length;i++)attr=o.attributes[i],'"'!==attr.name&&e.setAttribute(attr.name,attr.value);e.style.position="absolute",o.parentNode.insertBefore(e,o),o.style.opacity=0}var o=jQuery(this)[0];o.complete?e():o.addEventListener("load",e,!0)}})},confirmThemeModal:function(e){e.preventDefault();var a=jQuery(this).closest('[data-id="theme-modal"]'),t=Joomla.JText._("LIB_NOBOSS_FIELD_NOBOSSTHEME_MODAL_RESET_VALUES_DESC");Joomla.JText._("FIELD_NOBOSSTHEME_MODAL_RESET_VALUES_DESC")&&""!=Joomla.JText._("FIELD_NOBOSSTHEME_MODAL_RESET_VALUES_DESC")&&(t=Joomla.JText._("FIELD_NOBOSSTHEME_MODAL_RESET_VALUES_DESC")),jQuery.confirm({title:Joomla.JText._("LIB_NOBOSS_FIELD_NOBOSSTHEME_MODAL_RESET_VALUES_LABEL"),content:t,type:"blue",closeIcon:"cancel",escapeKey:"cancel",buttons:{cancel:{keys:["esc"],text:Joomla.JText._("LIB_NOBOSS_FIELD_NOBOSSTHEME_MODAL_CANCEL_BUTTON"),action:function(){nobosstheme.closeThemeModal(a)}},confirm:{text:Joomla.JText._("LIB_NOBOSS_FIELD_NOBOSSTHEME_MODAL_CONFIRM_BUTTON"),btnClass:"btn-blue",keys:["enter"],action:function(){var e=a.find('[data-id="selected-theme"]').find('[data-id="selected-theme-img"]'),t={theme:e.data("theme"),sample:{id:e.data("sample"),img:e.attr("src")}};jQuery(a).parent().find('[data-id="theme-modal-input"]').attr("data-value",JSON.stringify(t)).val(t.theme),jQuery(a).parent().find('[data-id="noboss-theme-selected"]').val(jQuery(a).find("[data-id=theme-option][data-value="+t.theme+"]").find("p").html()),void 0!==nobosstheme.token&&0===nobosstheme.token.length?nobosstheme.invalidOrExpiratedLicense(Joomla.JText._("LIB_NOBOSS_FIELD_NOBOSSTHEME_GENERATE_EXAMPLES_ERROR_TOKEN_NOT_VALID")):1==jQuery(a).parent().find('[data-id="theme-modal-input"]').attr("data-load-sample-data")&&(nobosstheme.isComponent?nobosstheme.generateComponentDefaultExamples(a):nobosstheme.generateModuleDefaultExamples(a)),nobosstheme.closeThemeModal(a)}}}})},cancelThemeModal:function(e){e.preventDefault();var t=jQuery(this).closest('[data-id="theme-modal"]'),a=jQuery(t).parent().find('[data-id="theme-modal-input"]').attr("data-value");if(0!==a.length){var o=JSON.parse(a);t.find('[data-id="theme-option"][data-value="'+o.theme+'"]').find('[data-id="sample-option"][data-value="'+o.sample.id+'"]').trigger("click")}nobosstheme.closeThemeModal(t)},classifyPlansAndSupport:function(e){jQuery(e).find('[data-id="theme-list"] [data-id="theme-option"]').each(function(){var e;if("custom"===jQuery(this).data("plan"))e=!0;else{var t=jQuery(this).data("plan").toString().split(",");e=-1!==jQuery.inArray(jQuery("#extension_plan").val(),t)}jQuery(this).data("avaliable",e),e?"1"===jQuery("#license_update_support_period").val()&&"1"===jQuery("#license_state").val()||jQuery(this).find('[data-id="sample-option"]').map(function(e,t){-1===jQuery(t).data("value").indexOf("default")&&jQuery(t).addClass("blocked").data("blocked",!0)}):jQuery(this).find('[data-id="sample-option"]').addClass("blocked").data("blocked",!0)})},generateModuleDefaultExamples:function(i){var e=JSON.parse(jQuery(i).parent().find('[data-id="theme-modal-input"]').attr("data-value")),t=e.sample.id,s=e.theme,r=(jQuery(i).parent().find('[data-id="theme-modal-input"]').val(),jQuery("#itemsloadmode").find('option[value="'+jQuery("#itemsloadmode").val()+'"]').first().data("subform"));r=void 0!==r?r.replace("##model##",s):[];var a=JSON.parse(nobosstheme.themeInfos.subforms),o=JSON.parse(nobosstheme.themeInfos.modals),n=JSON.parse(nobosstheme.themeInfos.fields),l=[],d=[];void 0!==a&&jQuery(a).each(function(e,t){t=t.replace("##model##",s),0!=jQuery('input[name="jform[params]['+t+']"]').parents(".control-group").length&&(d.push(t),l.push(jQuery('input[name="jform[params]['+t+']"]').parents(".control-group")))});var m=[];void 0!==o&&jQuery(o).each(function(e,t){t=t.replace("##model##",s),0!=jQuery('input[data-id="noboss-modal-input-hidden"][data-modal-name="'+t+'"]').length&&m.push(t)});var u=[],c=[];void 0!==n&&jQuery(n).each(function(e,t){0!=jQuery('[name^="jform[params]['+t+']"]').parents(".control-group").length&&(u.push(t),c.push(jQuery('[name^="jform[params]['+t+']"]').parents(".control-group")))}),void 0!==o&&jQuery(o).each(function(e,t){t=t.replace("##model##",s),0!=jQuery('input[data-id="noboss-modal-input-hidden"][data-modal-name="'+t+'"]').length&&m.push(t)}),jQuery.ajax({url:"../administrator/index.php?option=com_nobossajax&library=noboss.forms.fields.nobosstheme.nobosstheme&method=loadModuleSample&format=raw",data:{extensionName:nobosstheme.extensionName,itemsFormName:d,addModals:m,fieldsNames:u,lang:nobosstheme.themeInfos.langCode,loadModeSubform:r,sampleId:t,model:s,token:nobosstheme.token},timeout:2e4,type:"POST",beforeSend:function(){jQuery("body").append('<div class="loader loader--fullpage"></div>'),jQuery("body").append('<div class="loader-fade"></div>')}}).done(function(t){var e=!1;try{e=JSON.parse(t)}catch(e){return console.log("generateModuleDefaultExamples"),console.log(t),void jQuery.alert({title:Joomla.JText._("LIB_NOBOSS_FIELD_NOBOSSTHEME_GENERATE_EXAMPLES_ERROR_TITLE"),content:Joomla.JText._("LIB_NOBOSS_FIELD_NOBOSSTHEME_GENERATE_EXAMPLES_ERROR_JSON_PARSE_LOCAL")})}if(1===e.success)if("INVALID_TOKEN"===e.data)nobosstheme.invalidOrExpiratedLicense(e.message);else{if(jQuery.each(e.data.modals,function(e,t){var a=jQuery(i).closest("#myTabContent").find('[data-modal-name="'+e+'"]');0!==a.length&&a.val(t).siblings('[data-id="modal"]').remove()}),void 0!==r&&0<r.length){jQuery("#itemsloadmode").val(e.data.itemsloadmode),jQuery("#itemsloadmode").trigger("liszt:updated"),jQuery("#itemsloadmode").trigger("change");var a=Object.keys(e.data.items)[Object.keys(e.data.items).length-1],o=jQuery(e.data.items[a]).find('input[type="hidden"][name^="jform[params]"]')[0],n=jQuery("body").find('input[type="hidden"][name="'+o.name+'"]').closest(".control-group");l.push(n)}var d=0;jQuery.each(e.data.fields,function(e,t){var a=jQuery(t),o=a.find('[name^="jform[params]['+e+']"]').attr("id");a.find("fieldset").length&&(o=a.find("fieldset").attr("id"));var n=jQuery(c[d]).find('[name^="jform[params]['+e+']"]').attr("id");jQuery(c[d]).find("fieldset").length&&(n=jQuery(c[d]).find("fieldset").attr("id")),nobosstheme.replaceAttr(a.find("[name^="+o+"]"),"name",o,n),nobosstheme.replaceAttr(a.find("[id^="+o+"]"),"id",o,n),nobosstheme.replaceAttr(a.find("[for^="+o+"]"),"for",o,n),nobosstheme.replaceAttr(a.find("[href*="+o+"]"),"href",o,n);var i=jQuery(c[d]).replaceWith(a);setTimeout(function(){jQuery("select").chosen(),jQuery(document).trigger("new-container-add",i)},400),d++}),setTimeout(function(){util.fixScripts(jQuery(document)),util.activateYesno(jQuery(document)),window.SqueezeBox&&window.SqueezeBox.assign&&jQuery("a.modal").each(function(e,t){SqueezeBox.assign(jQuery(t).get(),{parse:"rel"})})},400),d=0,jQuery.each(e.data.items,function(e,t){var a=jQuery(t);if(nobosstheme.checkShowonDependencies(a,s))return jQuery(l[d]).css("display","none"),void d++;var o="jform_params__",n="jform_params_";nobosstheme.replaceAttr(a.find("[name^="+o+"]"),"name",o,n),nobosstheme.replaceAttr(a.find("[id^="+o+"]"),"id",o,n),nobosstheme.replaceAttr(a.find("[for^="+o+"]"),"for",o,n),nobosstheme.replaceAttr(a.find("[href*="+o+"]"),"href",o,n),jQuery(l[d]).replaceWith(a);var i=a.find("div.subform-repeatable");try{i.subformRepeatable()}catch(e){}jQuery(i).find(".subform-repeatable-group").each(function(){jQuery(this).data("new",!0),jQuery(this).find("select").chosen(),util.fixScripts(jQuery(this).parent("div.subform-repeatable")),util.activateYesno(jQuery(this).parent("div.subform-repeatable")),jQuery(document).trigger("subform-row-add",jQuery(this)),nobosstheme.themeInfos.lowerJVersion&&jQuery(this).find(".minicolors").each(function(){$(this).minicolors({control:$(this).attr("data-control")||"hue",format:"color"===$(this).attr("data-validate")?"hex":("rgba"===$(this).attr("data-format")?"rgb":$(this).attr("data-format"))||"hex",keywords:$(this).attr("data-keywords")||"",opacity:"rgba"===$(this).attr("data-format"),position:$(this).attr("data-position")||"default",theme:"bootstrap"})})}),jQuery(i).find(".minicolors").removeClass("minicolors").addClass("minicolors"),d++})}else jQuery.alert({title:Joomla.JText._("LIB_NOBOSS_FIELD_NOBOSSTHEME_GENERATE_EXAMPLES_ERROR_TITLE"),content:e.message})}).fail(function(){jQuery.alert({title:Joomla.JText._("LIB_NOBOSS_FIELD_NOBOSSTHEME_GENERATE_EXAMPLES_ERROR_TITLE"),content:Joomla.JText._("LIB_NOBOSS_FIELD_NOBOSSTHEME_GENERATE_EXAMPLES_ERROR_UNREACHABLE")})}).always(function(){jQuery(i).parent().find('[data-id="theme-modal-input"]').trigger("change"),jQuery(document).trigger("subform-row-add",jQuery("section#content")),setTimeout(function(){jQuery("body").find(".loader.loader--fullpage").remove(),jQuery("body").find(".loader-fade").remove(),jQuery("#itemsloadmode").find("option").length<=1&&(jQuery("#itemsloadmode").closest(".control-group").hide(),jQuery("#itemsloadmode").find("option").first().attr("selected",!0))},400)})},replaceAttr:function(e,o,n,i){jQuery(e).each(function(e,t){var a=jQuery(t).attr(o).replace(n,i);jQuery(t).attr(o,a)})},generateComponentDefaultExamples:function(e){var t=JSON.parse(jQuery(e).parent().find('[data-id="theme-modal-input"]').attr("data-value")),a=t.sample.id,o=t.theme;jQuery(e).parent().find('[data-id="theme-modal-input"]').val();jQuery.ajax({url:"../administrator/index.php?option=com_nobossajax&library=noboss.forms.fields.nobosstheme.nobosstheme&method=loadComponentSample&format=raw",data:{extensionName:nobosstheme.extensionName,sampleId:a,model:o,token:nobosstheme.token},type:"POST",beforeSend:function(){jQuery("body").append('<div class="loader loader--fullpage"></div>'),jQuery("body").append('<div class="loader-fade"></div>')}}).done(function(t){var e=!1;try{e=JSON.parse(t)}catch(e){return console.log("generateComponentDefaultExamples"),console.log(t),void jQuery.alert({title:Joomla.JText._("LIB_NOBOSS_FIELD_NOBOSSTHEME_GENERATE_EXAMPLES_ERROR_TITLE"),content:Joomla.JText._("LIB_NOBOSS_FIELD_NOBOSSTHEME_GENERATE_EXAMPLES_ERROR_JSON_PARSE_LOCAL")})}if(1===e.success)if("INVALID_TOKEN"===e.data)nobosstheme.invalidOrExpiratedLicense(e.message);else{jQuery.each(e.data.modalsJson,function(e,t){jQuery('[data-modal-name="'+e+'"]').val(t).siblings('[data-id="modal"]').remove()}),jQuery.each(e.data.fields,function(e,t){jQuery('[name="jform\\['+e+'\\]"]').closest(".control-group").replaceWith(t)});var a=jQuery("section#content");util.fixScripts(a),util.activateYesno(a),a.find("select").chosen(),jQuery(document).trigger("subform-row-add",a),nobosstheme.themeInfos.lowerJVersion&&a.find(".minicolors").each(function(){$(this).minicolors({control:$(this).attr("data-control")||"hue",format:"color"===$(this).attr("data-validate")?"hex":("rgba"===$(this).attr("data-format")?"rgb":$(this).attr("data-format"))||"hex",keywords:$(this).attr("data-keywords")||"",opacity:"rgba"===$(this).attr("data-format"),position:$(this).attr("data-position")||"default",theme:"bootstrap"})});var o=a.find(".minicolors").removeClass("minicolors");jQuery(document).trigger("subform-row-add",a),o.addClass("minicolors")}else jQuery.alert({title:Joomla.JText._("LIB_NOBOSS_FIELD_NOBOSSTHEME_GENERATE_EXAMPLES_ERROR_TITLE"),content:e.message})}).fail(function(){jQuery.alert({title:Joomla.JText._("LIB_NOBOSS_FIELD_NOBOSSTHEME_GENERATE_EXAMPLES_ERROR_TITLE"),content:Joomla.JText._("LIB_NOBOSS_FIELD_NOBOSSTHEME_GENERATE_EXAMPLES_ERROR_UNREACHABLE")})}).always(function(){jQuery(e).parent().find('[data-id="theme-modal-input"]').trigger("change"),setTimeout(function(){jQuery("body").find(".loader.loader--fullpage").remove(),jQuery("body").find(".loader-fade").remove()},400)})},checkShowonDependencies:function(e,a){var o=!1;return e.data("showon")&&jQuery(e.data("showon")).each(function(e,t){if("jform[params][theme]"===t.field&&"="===t.sign&&-1===jQuery.inArray(a,t.values))return!(o=!0)}),o},invalidOrExpiratedLicense:function(e){jQuery.alert({title:Joomla.JText._("LIB_NOBOSS_FIELD_NOBOSSTHEME_GENERATE_EXAMPLES_ERROR_TITLE"),content:e,type:"red",buttons:{ok:{keys:["enter"]}}})}};